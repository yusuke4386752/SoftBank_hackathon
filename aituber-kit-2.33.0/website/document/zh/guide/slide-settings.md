# 幻灯片设置

## 概述

幻灯片设置提供AI角色进行演示的功能。您可以配置与演示相关的设置，例如AI自动展示幻灯片的模式和将PDF文件转换为幻灯片数据的功能。

**环境变量**:

```bash
# 设置幻灯片模式的初始状态（true/false）
NEXT_PUBLIC_SLIDE_MODE=false
```

## 幻灯片模式

幻灯片模式是AI自动展示幻灯片的模式。启用此模式后，AI将在朗读幻灯片内容的同时进行演示。

### 限制

幻灯片模式仅在选择以下AI服务时可用：

- OpenAI
- Anthropic Claude
- Google Gemini

::: warning 注意
启用幻灯片模式后，某些功能会自动禁用。
:::

### 使用方法

1. 点击"幻灯片模式"的设置按钮启用它
2. 从"使用的幻灯片"下拉菜单中选择您想使用的幻灯片集（如何添加新幻灯片将在后面解释）
3. 点击主窗口右上角的幻灯片按钮开始显示幻灯片

![幻灯片模式](/images/slide_ndu53.png)

### 关于幻灯片显示

- 幻灯片以Marp格式创建，设计为以**16:9**的宽高比最佳显示
- 如果屏幕比例差异很大，设计可能会破坏
- AI角色的位置可以自由移动，因此请根据幻灯片内容适当放置
- 您可以通过点击左上角的幻灯片图标（屏幕1）切换幻灯片显示的开/关状态
- 您可以使用左右按钮切换幻灯片页面，使用中间按钮播放/停止音频（屏幕2）

### 运行演示幻灯片

AITuberKit默认包含演示幻灯片。为了检查幻灯片模式的功能，我们建议先尝试演示幻灯片。

1. 在设置屏幕中启用幻灯片模式
2. 在"使用的幻灯片"中选择"demo"
3. 在角色设置（系统提示）中设置问答提示
4. 关闭设置屏幕后，将显示幻灯片

::: tip 提示示例
您可以将以下内容设置为问答提示的示例：

```
你是幻灯片演示者。
你正在进行幻灯片演示。

请根据以下材料信息回答观众的问题。
但是，请正确使用信息，不要产生幻觉。
对于普通问题，正常回应即可。

## 脚本信息

{{SCRIPTS}}

## 附加信息

{{SUPPLEMENT}}

请按以下格式回应，结合情感和对话文本：
[{neutral|happy|angry|sad|relaxed|surprised}]{对话文本}

回应时，有六种情感类型："neutral"表示正常，"happy"表示喜悦，"angry"表示愤怒，"sad"表示悲伤，"relaxed"表示安宁，"surprised"表示惊讶。

你的发言示例如下：
[neutral]感谢大家今天的到来。
[happy]我很高兴能在今天的演示中谈论这个有趣的话题。
[neutral]现在，关于当前的幻灯片，有什么问题吗？
[happy]感谢您的精彩问题！
[relaxed]我将在下一张幻灯片中详细解释这一点。
[sad]抱歉，我目前没有这个信息。
[angry]不，这是一个误解。让我给您提供准确的信息。
[neutral]还有其他问题吗？[happy]感谢您的积极参与。
[surprised]惊讶！
```

:::

### 问答功能

在幻灯片模式下，有一个功能可以让AI角色回答观众的问题。

1. 从聊天输入字段输入问题
2. AI通过参考脚本信息和补充信息生成答案
3. AI角色以情感表达回应问题

#### 问答工作原理

在问答功能中，执行以下处理：

- 问答不使用RAG（检索增强生成），而是使用长上下文处理
- 它包括系统提示中准备的所有信息（脚本信息和附加信息）以生成适当的答案
- 如果有与问题相关的幻灯片，AI会自动切换到该幻灯片进行回答
- 由于演示期间无法提问，您需要在提问前按暂停按钮

#### 准备问答文件

要使用问答功能，您需要准备以下文件：

1. **scripts.json**（必需）：脚本文件。包括每张幻灯片的内容和附加信息。

   ```json
   [
     {
       "page": 0,
       "line": "现在我将开始解释AITuberKit的幻灯片模式。",
       "notes": ""
     },
     {
       "page": 1,
       "line": "在开始开发幻灯片模式之前，您需要能够与AITuberKit对话，所以请做好准备。",
       "notes": "可以选择的AI服务有OpenAI、Anthropic Claude、Google Gemini、Groq、本地LLM和Dify。但是，幻灯片模式仅支持OpenAI、Anthropic Claude和Google Gemini。"
     }
   ]
   ```

2. **supplement.txt**（可选）：附加信息的文本文件。包含无法包含在scripts.json中的信息。

## 如何使用自定义幻灯片

您可以使用自己创建的幻灯片。按照以下步骤准备自定义幻灯片。

### 文件结构

1. 在`public/slides/[文件夹名]`中创建新文件夹（例如，`public/slides/myslide`）
2. 创建并放置以下文件：

   - **slides.md**（必需）：以Marp格式创建的幻灯片文件
   - **theme.css**（可选）：自定义幻灯片设计的CSS文件
   - **scripts.json**（必需）：脚本文件
   - **supplement.txt**（可选）：附加信息文件
   - **images/**（可选）：存储幻灯片中使用的图像的文件夹

## 幻灯片台本编辑

幻灯片台本可以在屏幕上编辑。
在幻灯片设置中，点击选定幻灯片右侧的“编辑台本”按钮，即可打开台本编辑屏幕。

![幻灯片台本编辑1](/images/slide_fa3sf.png)
![幻灯片台本编辑2](/images/slide_vhy4s.png)

### 页面脚本

实际由AI角色读取的脚本。

### 追加信息

添加该页面的补充信息。此信息用于问答。如果问题的内容包含在此补充信息中，AI角色将自动切换到该页面。
如果问题的内容包含在此补充信息中，AI角色将自动切换到该页面。

### 幻灯片整体补充信息

添加幻灯片整体的补充信息。此信息用于问答。<br>
不依赖页面的信息。如果参考此信息回答问题，幻灯片不会切换。

## PDF幻灯片转换

这是一个将PDF文件转换为可在幻灯片模式中使用的数据的功能。它使用多模态AI分析PDF的内容并将其保存为幻灯片数据。

::: warning 注意
目前，PDF幻灯片转换功能仅在选择OpenAI API时可用。
计划在未来支持其他AI服务。
:::

### 使用方法

1. 点击"选择PDF文件"按钮选择要转换的PDF文件
2. 在"保存文件夹名称"中输入要保存转换后的幻灯片数据的文件夹名称
3. 从"选择模型"中选择用于PDF分析的AI模型
4. 点击"将PDF转换为幻灯片"按钮开始转换

### 转换工作原理

在PDF幻灯片转换中，执行以下处理：

1. 将每张PDF幻灯片转换并保存为图像
2. 使用多模态AI分析每张幻灯片的内容
3. 从分析结果自动生成脚本（scripts.json）
4. 将图像和脚本作为一组幻灯片数据保存

### 幻灯片创建要点

最大化使用PDF幻灯片转换功能的要点：

- 建议以**16:9**的宽高比（横向）创建
- 包含图像的丰富设计的幻灯片也可以转换
- 使用PowerPoint等创建的幻灯片可以在转换为PDF格式后使用
- 转换后根据需要手动编辑脚本文件（scripts.json）

### 检查转换后的数据

1. 转换完成后，转换后的数据保存在`public/slides/{文件夹名}`文件夹中
2. `scripts.json`文件是自动生成的脚本文件
3. 检查内容并根据需要修改
4. 您可以通过在设置屏幕中从"使用的幻灯片"选择转换后的幻灯片来使用它

### PDF幻灯片转换的好处

- 轻松将使用PowerPoint等创建的现有幻灯片转换为AITuberKit使用
- 通过多模态AI分析，幻灯片中的图像和图表也被识别
- 省去了手动创建Marp格式幻灯片的麻烦

## YouTube评论集成（计划中）

未来计划添加从YouTube直播获取评论并回答问题的功能。此功能将允许在直播期间实时回答观众的问题。

## 注意事项和限制

- 幻灯片和脚本需要**提前**准备
- 不包括实时创建幻灯片或语音内容的功能
- 根据PDF的内容，可能无法准确转换
- 由于幻灯片转换在服务器端执行，大型PDF文件的转换可能需要时间
- PDF幻灯片转换目前仅支持OpenAI API
- 建议始终提前检查自动生成的脚本的内容
- 幻灯片针对16:9的宽高比进行了优化
